namespace ValveKeyValue.Test
{
    class BinaryWithMarkerTestCase
    {
        [TestCase]
        public void TestBinaryWithMarker()
        {
            var data = new byte[]
            {
                0x56, 0x42, 0x4B, 0x56, // VKBV marker
                0x00, 0x00, 0x00, 0x00, // CRC32 which we do not currently verify
                0x00, // object: TestObject
                    0x54, 0x65, 0x73, 0x74, 0x4F, 0x62, 0x6A, 0x65, 0x63, 0x74, 0x00,
                    0x01, // string: key = value
                        0x6B, 0x65, 0x79, 0x00,
                        0x76, 0x61, 0x6C, 0x75, 0x65, 0x00,
                    0x02, // int32: int = 0x01020304
                        0x69, 0x6E, 0x74, 0x00,
                        0x04, 0x03, 0x02, 0x01,
                    0x03, // float32: flt = 1234.5678f
                        0x66, 0x6C, 0x74, 0x00,
                        0x2B, 0x52, 0x9A, 0x44,
                    0x04, // color: col = 0x10203040
                        0x63, 0x6F, 0x6C, 0x00,
                        0x40, 0x30, 0x20, 0x10,
                    0x06, // pointer: ptr = 0x11223344
                        0x70, 0x74, 0x72, 0x00,
                        0x44, 0x33, 0x22, 0x11,
                    0x07, // uint64: long = 0x1122334455667788
                        0x6C, 0x6E, 0x67, 0x00,
                        0x88, 0x77, 0x66, 0x55, 0x44, 0x33, 0x22, 0x11,
                    0x0A, // int64, i64 = 0x0102030405070809
                        0x69, 0x36, 0x34, 0x00,
                        0x0B, 0x07, 0x06, 0x05, 0x04, 0x03, 0x02, 0x01,
                    0x0B, // end object
                0x0B, // end document
            };
            KVSerializer.Create(KVSerializationFormat.KeyValues1Binary).Deserialize(data);
        }
    }
}
